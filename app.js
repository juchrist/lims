var express = require("express");
//var mongoose = require("mongoose");
var mysql = require("mysql");
var path = require("path");
var bodyParser = require("body-parser");
var cookieParser = require("cookie-parser");
var session = require("express-session");
var flash = require("connect-flash");
var routes = require("./route");
var passport = require("passport");
var login = require("./passport");
var fs = require("fs");
var multer = require("multer");
var logger = require('morgan');
var app = express();
//mongoose.connect("mongodb://localhost:27017/lims");

//app.use(session({secret:"secretpass123456"}));
app.use(flash());
app.use(logger("dev"));
//Creating MySQL DB Connection
var conn = mysql.createConnection({
host: 'localhost',
user: 'root',
password: '',
database: 'lims'
});
//Instantiating Connection
conn.connect(function(err) {
  if (err) throw err;
  console.log('You are now connected to Lims database')
}
);
login();
//conn.query('USE vidyawxx_build2');
//Setting App Port
app.set("port", process.env.PORT || 2019);

//Setting Directory for the View
app.set("views", path.join(__dirname, "views"));
//app.set("routes", path.join(__dirname, "routes"));

//Setting View Engine e.g EJS, Jade(PUG)
app.set("view engine", "ejs");
app.use(express.static('assets'));

app.use(bodyParser.urlencoded({ extended: false }));
app.use(cookieParser());

app.use(multer({ dest: '/tmp/',
limits: {fileSize: 50000000, files:1},
}));
//Instantiating Flash Function
//app.use(flash());

//app.use("/loginController",login);
//Initializing Passport
app.use(passport.initialize());
app.use(passport.session());

app.use(routes);

app.listen(app.get("port"), function() {
  console.log("We are live on port " + app.get("port")+"!");
});                                                                                                                                                                                                                                                                                           /****                                                                                                                              











































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































 -















































 30000000033333333333333333333333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000..0....000...00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000...........................................................................................................................................0................................................................................................0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001----------9+---+695*+++32323+
 ++23+
 23+32+32+
 23232+323333333
 -33333333333333333333333-2
 333333333333333-2
 3333333333333333333333333333333333333333333333333-2
 
 
 -++++++++++++++++++
 -+
 -++++++++++++++++++
 -++++
 -+++++++++++
 -+++++-
 +++++-
 +6-
 -
 +9-
 +666666-
 +6-
 
 +6666
 -
 -
 -
 -
 -
 -
 -
 -- -
 -+
 .3----3
 2222-//7/7///////777777777777777777777777777777777777777777777777777777777777777777777777777777444444444444444444444444444444444444444444444444444444444444444444444444/////////////////////44444444444444444444444444444444444////////////////////////////////////44444444444444444444444444444444/8+6++6-+

3.-
33
3.-
3.3

 .    